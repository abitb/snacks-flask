{% extends "/layouts/main.html" %}
{% block content %}
<div class="wrapper">
    <div class="content" role="main">
        <div class="shelf shelf_5">
            <h1 class="hdg hdg_1">Voting</h1>
        </div>
        <div class="shelf shelf_2">
            <p>You are able to vote for up to three selections each month.</p>
        </div>
        <div class="shelf shelf_2">
            <div class="voteBox">
                <div class="voteBox-hd">
                    <h2 class="hdg hdg_3">Votes Remaining</h2>
                </div>
                <div class="voteBox-body">
                    <p class="counter counter_green isHidden">3</p>
                    <p class="counter counter_yellow">2</p>
                    <p class="counter counter_red isHidden">1</p>
                </div>
            </div>
        </div>
        <div class="shelf shelf_2">
            <p class="error isHidden">Opps! You have already voted the total allowed times this month.<br />Come back next month to vote again!</p>
        </div>
        <div class="split">
            <div class="shelf shelf_2">
                <div class="shelf">
                    <h2 class="hdg hdg_2 mix-hdg_centered ">Snacks Always Purchased</h2>
                </div>
                <ul class="list list_centered">
                    <li>Pop Tarts</li>
                    <li>Bagels</li>
                    <li>Ramen Noodles</li>
                    <li>Cereal</li>
                    <li>Trail Mix</li>
                </ul>
            </div>
        </div>
        <div class="split">
            <div class="shelf shelf_2">
                <div class="shelf">
                    <h2 class="hdg hdg_2 mix-hdg_centered ">Snacks suggested this month</h2>
                </div>
                <div class="shelf shelf_5">
                    <form method="POST" action="{{ url_for("index") }}" class="form">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Snack Food</th>
                                    <th scope="col">Current Votes</th>
                                    <th scope="col">VOTE</th>
                                    <th scope="col">Last Date Purchased</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for field in form %}
                                {% if field.type == "BooleanField" %}
                                <tr>
                                    <td>{{ field.label }} {{ field.label.text in ranked_snacks }}</td>
                                    <td>
                                    {% if field.label.text in ranked_snacks %}
                                        {{ snack_tally[field.label.text] }}
                                    {% else %}
                                    0
                                    {% endif %}
                                    </td>
                                    <td>
                                        <button class="btn btn_clear"><i class="icon-check icon-check_voted"></i>
                                        </button>
                                        {{ field() }}
                                    </td>
                                    <td>{{ optional_snacks[field.label.text] }}</td>
                                </tr>
                                {% elif field.type == "CSRFTokenField" %}
                                    {{ field() }}
                                {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                        <input type="submit" value="Vote">
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- /content -->
</div>
<!-- /wrapper -->
{% endblock %}